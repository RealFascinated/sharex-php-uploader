version: "3.4"

services:
  sharex-php-uploader:
    image: fascinated/sharex-php-uploader:latest
    # Uncomment the following line to build the image yourself
    # build: https://git.fascinated.cc/Fascinated/sharex-php-uploader.git
    restart: always
    environment:
      - MAX_UPLOAD_SIZE=500M
      - UPLOAD_SECRETS=set me # You can add multiple secrets. Format: secret1,secret2,secret3
      - UPLOAD_DIR=./ # The directory to store the uploaded files
      - USE_RANDOM_FILE_NAMES=true # If true, the uploaded files will be renamed to a random string
      - SHOULD_CONVERT_TO_WEBP=true # If true, the uploaded files will be converted to webp
      - WEBP_QUALITY=95 # The quality of the converted webp files
      - WEBP_THREADHOLD=1048576 # The minimum file size to convert to webp (1MB in bytes)
      - FILE_NAME_LENGTH=8 # The length of the random file name
    ports:
      - 80:80
    volumes:
      # Where to store the uploaded files
      - ./uploads:/var/www/html
